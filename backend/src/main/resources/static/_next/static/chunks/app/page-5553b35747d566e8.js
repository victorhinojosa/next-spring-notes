(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7596:function(e,t,n){Promise.resolve().then(n.bind(n,4310))},4310:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(7437),o=n(2265),a=n(4732),s=n(8396),i=n(7156),l=n(7075),c=n(8433),d=n(3751),h=n(3426);class u{static async get(e){let t=await fetch(e);if(!t.ok)throw Error("API request failed");return t.json()}static async put(e,t){let n=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("API request failed");return n.json()}static async patch(e,t){let n=await fetch(e,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("API request failed");return n.json()}}class f{asJson(){return{id:this.id,content:this.content}}static fromArray(e){return e.map(e=>new f(e))}constructor({id:e,content:t}){this.id=e,this.content=t}}let x=n(357).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8080/api",p={NOTES:"".concat(x,"/notes"),NOTE:e=>"".concat(x,"/note/").concat(e)};class m{static async register(e){if(!(e instanceof f))throw Error("Invalid note");return new f(await u.put(p.NOTES,e.asJson()))}}class w{static async search(){let e=await u.get(p.NOTES);return f.fromArray(e)}}class y{static async edit(e){if(!(e instanceof f))throw Error("Invalid note");return new f(await u.patch(p.NOTE(e.id),e.asJson()))}}var b=n(1733),g=n(9806),j=n(511),v=e=>{let{onSearch:t}=e;return(0,r.jsx)(b.Z,{position:"static",color:"default",elevation:0,children:(0,r.jsx)(g.Z,{children:(0,r.jsx)(j.Z,{variant:"h6",noWrap:!0,sx:{flexGrow:1},children:"Notes"})})})},C=()=>(0,r.jsx)(i.Z,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"background.paper"},children:(0,r.jsx)(j.Z,{variant:"body2",color:"text.secondary",align:"center",children:"Notes"})}),S=n(270),Z=n(4696),E=e=>{let{content:t,onClick:n}=e;return(0,r.jsx)(S.Z,{onClick:n,sx:{minHeight:200,display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative",overflow:"visible",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 12px rgba(0, 0, 0, 0.3)"}},children:(0,r.jsx)(Z.Z,{sx:{p:3},children:(0,r.jsx)(j.Z,{variant:"body1",sx:{fontSize:"1rem",lineHeight:1.6,color:"text.primary"},children:t})})})},k=n(2606),N=n(6093),O=n(5736),P=n(8784),T=n(6548),_=e=>{let{open:t,onClose:n,onSave:a,initialContent:s="",isNewNote:i=!1,isSaving:l=!1}=e,[c,d]=(0,o.useState)(""),[h,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{t&&(d(s),u(!1))},[t,s]);let f=async()=>{if(c.trim())try{await a({content:c}),d(""),u(!1),n()}catch(e){console.error("Error saving note:",e)}else n()};return(0,r.jsxs)(k.Z,{open:t,onClose:n,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"#1e1e1e",color:"white"}},children:[(0,r.jsx)(N.Z,{children:(0,r.jsx)(O.Z,{autoFocus:!0,multiline:!0,rows:4,fullWidth:!0,value:c,onChange:e=>{d(e.target.value),u(!0)},onKeyPress:e=>{"Enter"===e.key&&!e.shiftKey&&i&&(e.preventDefault(),f())},placeholder:"Take a note...",variant:"outlined",margin:"normal",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.23)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#2196f3"}}}})}),(0,r.jsx)(P.Z,{children:(0,r.jsx)(T.Z,{onClick:f,disabled:l||!h&&i,sx:{color:"rgba(255, 255, 255, 0.7)"},children:l?"Saving...":i?h&&c.trim()?"Save":"Cancel":"Close"})})]})};let I=(0,a.Z)({palette:{mode:"dark",primary:{main:"#2196f3"},secondary:{main:"#f50057"},background:{default:"#121212",paper:"#1e1e1e"}},shape:{borderRadius:12},components:{MuiCard:{styleOverrides:{root:{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.2)",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 12px rgba(0, 0, 0, 0.3)"}}}}}});function A(){let[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)(""),[u,x]=(0,o.useState)(!1),[p,b]=(0,o.useState)(null),[g,j]=(0,o.useState)(!1),[S,Z]=(0,o.useState)(0);(0,o.useEffect)(()=>{k()},[S]);let k=async()=>{try{let e=await w.search();t(e)}catch(e){console.error("Failed to fetch notes:",e)}},N=e=>{b(e),x(!0)},O=async e=>{j(!0);try{if(p){let t=new f({id:p.id,content:e.content});await y.edit(t)}else{let t=new f({id:crypto.randomUUID(),content:e.content});await m.register(t)}x(!1),b(null),await k(),Z(e=>e+1)}catch(e){console.error("Failed to save note:",e),k()}finally{j(!1)}},P=e.filter(e=>e.content.toLowerCase().includes(n.toLowerCase()));return(0,r.jsx)(s.Z,{theme:I,children:(0,r.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,r.jsx)(v,{onSearch:a}),(0,r.jsx)(l.Z,{component:"main",sx:{mt:4,mb:2,flex:1,maxWidth:"lg"},children:(0,r.jsx)(c.ZP,{container:!0,spacing:3,sx:{py:2},children:P.map(e=>(0,r.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,r.jsx)(E,{content:e.content,onClick:()=>N(e)})},e.id))})}),(0,r.jsx)(d.Z,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:24,right:24,boxShadow:"0 4px 12px rgba(33, 150, 243, 0.4)","&:hover":{transform:"scale(1.1)"},transition:"transform 0.2s"},onClick:()=>{b(null),x(!0)},children:(0,r.jsx)(h.Z,{})}),(0,r.jsx)(C,{}),(0,r.jsx)(_,{open:u,onClose:()=>x(!1),onSave:O,isSaving:g,initialContent:(null==p?void 0:p.content)||"",isNewNote:!p})]})})}}},function(e){e.O(0,[354,971,23,744],function(){return e(e.s=7596)}),_N_E=e.O()}]);